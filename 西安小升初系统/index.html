<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>西安小升初智能评估系统 2025增强版</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <!-- 头部状态栏 -->
    <div class="status-bar" id="statusBar">
        <div class="status-indicator" id="statusIndicator">
            <i class="fas fa-laptop"></i> <span id="statusText">本地模式</span>
        </div>
        <button class="config-btn" onclick="toggleConfigPanel()">
            <i class="fas fa-cog"></i> 配置
        </button>
    </div>

    <!-- 配置面板 -->
    <div class="config-panel" id="configPanel">
        <h3><i class="fas fa-key"></i> AI配置</h3>
        <div class="config-content">
            <select id="providerSelect">
                <option value="bailian">阿里百炼</option>
                <option value="openai">OpenAI</option>
                <option value="deepseek">DeepSeek</option>
                <option value="google">Google Gemini</option>
            </select>
            <input type="password" id="apiKeyInput" placeholder="API Key">
            <input type="text" id="appIdInput" placeholder="App ID（仅百炼需要）">
            <div class="button-group">
                <button class="btn btn-primary" onclick="saveConfig()">保存配置</button>
                <button class="btn btn-secondary" onclick="useLocalMode()">使用本地模式</button>
            </div>
        </div>
    </div>

    <!-- 主容器 -->
    <div class="container">
        <!-- 进度条 -->
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <!-- 标题区域 -->
        <header class="main-header">
            <h1>🎓 西安小升初智能评估系统</h1>
            <p class="subtitle">基于2025年最新政策 · 个性化分析 · 专业推荐</p>
        </header>

        <!-- 步骤指示器 -->
        <nav class="step-nav" id="stepNav">
            <!-- 动态生成步骤 -->
        </nav>

        <!-- 主要内容区域 -->
        <main class="main-content">
            <div id="stepContainer">
                <!-- 步骤内容会动态加载到这里 -->
            </div>
        </main>

        <!-- 底部导航 -->
        <footer class="footer-nav">
            <div class="nav-buttons" id="navButtons">
                <!-- 导航按钮会动态生成 -->
            </div>
        </footer>

        <!-- 浮动助手 -->
        <div class="floating-assistant">
            <button class="assistant-btn" onclick="toggleChat()">
                <i class="fas fa-robot"></i>
            </button>
            <div class="chat-window" id="chatWindow">
                <!-- 聊天窗口内容 -->
            </div>
        </div>
    </div>

    <!-- 加载外部数据 -->
    <script src="src/data/schools.data.js"></script>
    <script src="src/data/policy.data.js"></script>
    <script src="src/data/streets.data.js"></script>
    
    <!-- 加载工具函数 -->
    <script src="src/utils/storage.util.js"></script>
    <script src="src/utils/validation.util.js"></script>
    <script src="src/utils/pinyin.util.js"></script>
    
    <!-- 加载服务 -->
    <script src="src/services/ai.service.js"></script>
    <script src="src/services/data.service.js"></script>
    <script src="src/services/pdf.service.js"></script>
    
    <!-- 加载组件 -->
    <script src="src/components/StepIndicator.js"></script>
    <script src="src/components/ChatWindow.js"></script>
    
    <!-- 加载页面组件 -->
    <script src="src/pages/Step1_BasicInfo.js"></script>
    <script src="src/pages/Step2_Ability.js"></script>
    <script src="src/pages/Step3_Residence.js"></script>
    <script src="src/pages/Step4_Property.js"></script>
    <script src="src/pages/Step5_PrivateSchool.js"></script>
    <script src="src/pages/Step6_Analysis.js"></script>
    <script src="src/pages/Step7_Recommendation.js"></script>
    
    <!-- 主应用 -->
    <script src="src/app.js"></script>
</body>
</html>